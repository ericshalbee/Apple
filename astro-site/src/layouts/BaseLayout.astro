---
export interface Props {
  title: string;
  description: string;
  keywords?: string; 
  canonical?: string;
  ogImage?: string;
  noindex?: boolean;
}

const { 
  title, 
  description, 
  keywords = "Apple Pay customer service, Apple Pay support, Apple Pay help, Apple Pay contact, Apple Pay customer support, Apple Pay phone number, Apple Pay live chat, Apple Pay not working, Apple Pay declined, Apple Pay fraud support",
  canonical,
  ogImage = "/apple.png",
  noindex = false 
} = Astro.props;

const canonicalURL = canonical || new URL(Astro.url.pathname, Astro.site);
const ogImageURL = new URL(ogImage, Astro.site);
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/png" href="/apple.png" />
    
    <!-- Primary Meta Tags -->
    <title>{title}</title>
    <meta name="title" content={title} />
    <meta name="description" content={description} />
    {keywords && <meta name="keywords" content={keywords} />}
    <link rel="canonical" href={canonicalURL} />
    
    <!-- Robots -->
    {noindex ? (
      <meta name="robots" content="noindex, nofollow" />
    ) : (
      <meta name="robots" content="index, follow" />
    )}
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonicalURL} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={ogImageURL} />
    <meta property="og:site_name" content="Apple Pay Support" />
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content={canonicalURL} />
    <meta property="twitter:title" content={title} />
    <meta property="twitter:description" content={description} />
    <meta property="twitter:image" content={ogImageURL} />
    <meta name="twitter:creator" content="@AppleSupport" />
    
    <!-- Preload critical resources -->
    <link rel="preload" href="/apple.png" as="image" type="image/png" />
    
    <!-- DNS prefetch for external domains -->
    <link rel="dns-prefetch" href="//support.apple.com" />
    <link rel="dns-prefetch" href="//getsupport.apple.com" />
  </head>
  <body>
    <slot />
  </body>
</html>